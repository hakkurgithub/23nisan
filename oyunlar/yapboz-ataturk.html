<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atat√ºrk ve √áocuklar Yapbozu - 23 Nisan Oyunlarƒ±</title>
    <meta name="description" content="Atat√ºrk ve √ßocuklar yapboz oyunu. Par√ßalarƒ± s√ºr√ºkleyip resmi tamamla!">
    
    <link rel="stylesheet" href="../style.css">
    <style>
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        
        .puzzle-area {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            max-width: 400px;
            margin: 20px auto;
            border: 3px solid var(--primary-color);
            border-radius: 10px;
            padding: 10px;
            background: white;
        }
        
        .puzzle-piece {
            width: 120px;
            height: 120px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .puzzle-piece.filled {
            border: 2px solid var(--primary-color);
            background: white;
        }
        
        .puzzle-piece:hover {
            transform: scale(1.05);
            border-color: var(--accent-color);
        }
        
        .pieces-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            padding: 20px;
            border: 2px dashed var(--accent-color);
            border-radius: 15px;
            background: var(--light-bg);
        }
        
        .piece {
            width: 80px;
            height: 80px;
            background-size: 240px 240px;
            border: 2px solid white;
            border-radius: 8px;
            cursor: grab;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            background-repeat: no-repeat;
        }
        
        .piece:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .piece.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        /* Yapboz par√ßalarƒ±nƒ±n arka plan pozisyonlarƒ± - 120px piece boyutuna uygun */
        .piece[data-piece="0"] { background-position: 0 0; }
        .game-controls {
            margin: 20px 0;
        }
        
        .btn {
            margin: 0 10px;
            padding: 12px 24px;
            font-size: 16px;
        }
        
        .success-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .success-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            animation: celebration 0.5s ease;
        }
        
        @keyframes celebration {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .confetti {
            position: absolute;
            font-size: 2rem;
            animation: fall 3s linear infinite;
        }
        
        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        .timer {
            font-size: 1.2rem;
            color: var(--primary-color);
            font-weight: bold;
            margin: 10px 0;
        }
        
        .score {
            background: var(--accent-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px;
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/logo.svg" alt="23 Nisan Logo">
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="../index.html">Ana Sayfa</a></li>
                <li><a href="../oyunlar.html" class="active">Oyunlar</a></li>
                <li><a href="../atolyeler.html">At√∂lyeler</a></li>
                <li><a href="../etkinlikler.html">Etkinlikler</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="game-container">
            <h1>üß© Atat√ºrk ve √áocuklar Yapbozu</h1>
            <p>Par√ßalarƒ± s√ºr√ºkleyerek Atat√ºrk'√ºn √ßocuklarla olan bu g√ºzel resmi tamamla!</p>
            
            <div class="game-info">
                <div class="timer">‚è±Ô∏è S√ºre: <span id="timer">00:00</span></div>
                <div class="score">üéØ Puan: <span id="score">0</span></div>
                <div class="score">‚úÖ Doƒüru: <span id="correct">0</span>/9</div>
            </div>
            
            <div class="puzzle-area" id="puzzleArea">
                <!-- 3x3 yapboz alanƒ± -->
                <div class="puzzle-piece" data-position="0"></div>
                <div class="puzzle-piece" data-position="1"></div>
                <div class="puzzle-piece" data-position="2"></div>
                <div class="puzzle-piece" data-position="3"></div>
                <div class="puzzle-piece" data-position="4"></div>
                <div class="puzzle-piece" data-position="5"></div>
                <div class="puzzle-piece" data-position="6"></div>
                <div class="puzzle-piece" data-position="7"></div>
                <div class="puzzle-piece" data-position="8"></div>
            </div>
            
            <div class="pieces-container" id="piecesContainer">
                <!-- Karƒ±≈üƒ±k yapboz par√ßalarƒ± buraya gelecek -->
            </div>
            
            <div class="game-controls">
                <button class="btn btn-primary" onclick="startGame()">üéÆ Yeni Oyun</button>
                <button class="btn btn-secondary" onclick="showHint()">üí° ƒ∞pucu</button>
                <button class="btn btn-secondary" onclick="goBack()">üè† Geri D√∂n</button>
            </div>
        </div>
    </main>
    
    <!-- Ba≈üarƒ± Modal -->
    <div class="success-modal" id="successModal">
        <div class="success-content">
            <h2>üéâ Tebrikler!</h2>
            <p>Yapbozu ba≈üarƒ±yla tamamladƒ±n!</p>
            <p><strong>S√ºren:</strong> <span id="finalTime"></span></p>
            <p><strong>Puanƒ±n:</strong> <span id="finalScore"></span></p>
            <button class="btn btn-primary" onclick="startGame()">üîÑ Tekrar Oyna</button>
            <button class="btn btn-secondary" onclick="closeModal()">‚úÖ Tamam</button>
        </div>
    </div>

    <script>
        let gameState = {
            startTime: null,
            timerInterval: null,
            score: 0,
            correctPieces: 0,
            draggedPiece: null,
            pieces: []
        };

        // Atat√ºrk ve √ßocuklar resminin detaylƒ± SVG versiyonu
        const puzzleImage = `data:image/svg+xml,${encodeURIComponent(`
            <svg width="240" height="240" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#87CEEB"/>
                        <stop offset="100%" style="stop-color:#E0F6FF"/>
                    </linearGradient>
                    <linearGradient id="face" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FDBCB4"/>
                        <stop offset="100%" style="stop-color:#FCB69F"/>
                    </linearGradient>
                    <linearGradient id="uniform" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#2F4F4F"/>
                        <stop offset="100%" style="stop-color:#1C1C1C"/>
                    </linearGradient>
                </defs>
                
                <!-- Arka plan -->
                <rect width="240" height="240" fill="url(#bg)"/>
                
                <!-- Zemin -->
                <rect x="0" y="180" width="240" height="60" fill="#90EE90"/>
                
                <!-- Atat√ºrk fig√ºr√º (merkez) -->
                <!-- V√ºcut -->
                <rect x="100" y="120" width="40" height="80" rx="8" fill="url(#uniform)"/>
                
                <!-- Kafa -->
                <circle cx="120" cy="100" r="25" fill="url(#face)"/>
                
                <!-- Sa√ß -->
                <path d="M95 85 Q120 70 145 85 L145 95 Q120 80 95 95 Z" fill="#4A4A4A"/>
                
                <!-- G√∂zler -->
                <circle cx="113" cy="95" r="3" fill="#000"/>
                <circle cx="127" cy="95" r="3" fill="#000"/>
                
                <!-- Burun -->
                <path d="M120 100 L118 105 L122 105 Z" fill="#F4A460"/>
                
                <!-- Aƒüƒ±z -->
                <path d="M115 108 Q120 112 125 108" stroke="#000" stroke-width="1" fill="none"/>
                
                <!-- Bƒ±yƒ±k -->
                <rect x="115" y="103" width="10" height="3" rx="2" fill="#4A4A4A"/>
                
                <!-- Sol √ßocuk -->
                <!-- V√ºcut -->
                <circle cx="60" cy="160" r="15" fill="#FF6B6B"/>
                
                <!-- Kafa -->
                <circle cx="60" cy="140" r="12" fill="url(#face)"/>
                
                <!-- Sa√ß -->
                <circle cx="60" cy="135" r="10" fill="#8B4513"/>
                
                <!-- G√∂zler -->
                <circle cx="57" cy="138" r="1.5" fill="#000"/>
                <circle cx="63" cy="138" r="1.5" fill="#000"/>
                
                <!-- Aƒüƒ±z (g√ºl√ºmseme) -->
                <path d="M57 142 Q60 145 63 142" stroke="#000" stroke-width="0.5" fill="none"/>
                
                <!-- Kollar -->
                <rect x="45" y="150" width="6" height="15" rx="3" fill="url(#face)"/>
                <rect x="69" y="150" width="6" height="15" rx="3" fill="url(#face)"/>
                
                <!-- Saƒü √ßocuk -->
                <!-- V√ºcut -->
                <circle cx="180" cy="160" r="15" fill="#4ECDC4"/>
                
                <!-- Kafa -->
                <circle cx="180" cy="140" r="12" fill="url(#face)"/>
                
                <!-- Sa√ß -->
                <circle cx="180" cy="135" r="10" fill="#FF69B4"/>
                
                <!-- G√∂zler -->
                <circle cx="177" cy="138" r="1.5" fill="#000"/>
                <circle cx="183" cy="138" r="1.5" fill="#000"/>
                
                <!-- Aƒüƒ±z (g√ºl√ºmseme) -->
                <path d="M177 142 Q180 145 183 142" stroke="#000" stroke-width="0.5" fill="none"/>
                
                <!-- Kollar -->
                <rect x="165" y="150" width="6" height="15" rx="3" fill="url(#face)"/>
                <rect x="189" y="150" width="6" height="15" rx="3" fill="url(#face)"/>
                
                <!-- √ñn plandaki √ßocuk -->
                <!-- V√ºcut -->
                <circle cx="120" cy="180" r="12" fill="#FFD93D"/>
                
                <!-- Kafa -->
                <circle cx="120" cy="165" r="10" fill="url(#face)"/>
                
                <!-- Sa√ß -->
                <circle cx="120" cy="160" r="8" fill="#654321"/>
                
                <!-- G√∂zler -->
                <circle cx="117" cy="163" r="1.5" fill="#000"/>
                <circle cx="123" cy="163" r="1.5" fill="#000"/>
                
                <!-- Aƒüƒ±z (g√ºl√ºmseme) -->
                <path d="M117 167 Q120 170 123 167" stroke="#000" stroke-width="0.5" fill="none"/>
                
                <!-- T√ºrk Bayraƒüƒ± (k√º√ß√ºk) -->
                <rect x="10" y="20" width="40" height="25" fill="#E63946"/>
                <circle cx="23" cy="32" r="6" fill="white"/>
                <circle cx="26" cy="32" r="4.5" fill="#E63946"/>
                <path d="M32 28 L35 30 L32 32 L35 34 L32 36 L30 33 L32 32 L30 31 Z" fill="white"/>
                
                <!-- G√ºne≈ü -->
                <circle cx="200" cy="40" r="15" fill="#FFD700"/>
                <path d="M200 20 L200 25 M200 55 L200 60 M180 40 L185 40 M215 40 L220 40 M186 26 L190 30 M210 50 L214 54 M186 54 L190 50 M210 30 L214 26" stroke="#FFD700" stroke-width="2"/>
                
                <!-- Bulutlar -->
                <circle cx="50" cy="50" r="8" fill="white" opacity="0.8"/>
                <circle cx="58" cy="50" r="10" fill="white" opacity="0.8"/>
                <circle cx="66" cy="50" r="8" fill="white" opacity="0.8"/>
                
                <circle cx="150" cy="60" r="6" fill="white" opacity="0.8"/>
                <circle cx="156" cy="60" r="8" fill="white" opacity="0.8"/>
                <circle cx="162" cy="60" r="6" fill="white" opacity="0.8"/>
                
                <!-- √ái√ßekler -->
                <circle cx="30" cy="200" r="3" fill="#FF69B4"/>
                <circle cx="27" cy="197" r="2" fill="#FF1493"/>
                <circle cx="33" cy="197" r="2" fill="#FF1493"/>
                <circle cx="27" cy="203" r="2" fill="#FF1493"/>
                <circle cx="33" cy="203" r="2" fill="#FF1493"/>
                
                <circle cx="210" cy="200" r="3" fill="#FF4500"/>
                <circle cx="207" cy="197" r="2" fill="#FF6347"/>
                <circle cx="213" cy="197" r="2" fill="#FF6347"/>
                <circle cx="207" cy="203" r="2" fill="#FF6347"/>
                <circle cx="213" cy="203" r="2" fill="#FF6347"/>
                
                <!-- Grid √ßizgileri (√ßok hafif) -->
                <line x1="80" y1="0" x2="80" y2="240" stroke="rgba(0,0,0,0.1)" stroke-width="1" stroke-dasharray="2,2"/>
                <line x1="160" y1="0" x2="160" y2="240" stroke="rgba(0,0,0,0.1)" stroke-width="1" stroke-dasharray="2,2"/>
                <line x1="0" y1="80" x2="240" y2="80" stroke="rgba(0,0,0,0.1)" stroke-width="1" stroke-dasharray="2,2"/>
                <line x1="0" y1="160" x2="240" y2="160" stroke="rgba(0,0,0,0.1)" stroke-width="1" stroke-dasharray="2,2"/>
                
                <!-- Ba≈ülƒ±k -->
                <text x="120" y="15" text-anchor="middle" fill="#1D3557" font-size="10" font-family="Arial" font-weight="bold">Atat√ºrk ve √áocuklar</text>
            </svg>
        `)}`;

        function initGame() {
            createPuzzlePieces();
            startGame();
        }

        function createPuzzlePieces() {
            const container = document.getElementById('piecesContainer');
            container.innerHTML = '';
            gameState.pieces = [];

            for (let i = 0; i < 9; i++) {
                const piece = document.createElement('div');
                piece.className = 'piece';
                piece.draggable = true;
                piece.dataset.piece = i;
                piece.style.backgroundImage = `url(${puzzleImage})`;
                
                // K√º√ß√ºk par√ßalar i√ßin pozisyon ayarla
                const row = Math.floor(i / 3);
                const col = i % 3;
                piece.style.backgroundPosition = `${-col * 80}px ${-row * 80}px`;
                
                // Drag events
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                // Touch events for mobile
                piece.addEventListener('touchstart', handleTouchStart);
                piece.addEventListener('touchmove', handleTouchMove);
                piece.addEventListener('touchend', handleTouchEnd);
                
                gameState.pieces.push(piece);
                container.appendChild(piece);
            }
            
            // Setup drop zones
            const puzzlePieces = document.querySelectorAll('.puzzle-piece');
            puzzlePieces.forEach(piece => {
                piece.addEventListener('dragover', handleDragOver);
                piece.addEventListener('drop', handleDrop);
            });
        }

        function startGame() {
            gameState.startTime = Date.now();
            gameState.score = 0;
            gameState.correctPieces = 0;
            
            // Timer ba≈ülat
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            gameState.timerInterval = setInterval(updateTimer, 1000);
            
            // Par√ßalarƒ± karƒ±≈ütƒ±r
            shufflePieces();
            
            // Puzzle alanƒ±nƒ± temizle
            document.querySelectorAll('.puzzle-piece').forEach(piece => {
                piece.innerHTML = '';
                piece.classList.remove('filled');
            });
            
            updateScore();
            closeModal();
        }

        function shufflePieces() {
            const container = document.getElementById('piecesContainer');
            const pieces = Array.from(container.children);
            
            // Fisher-Yates shuffle
            for (let i = pieces.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                container.appendChild(pieces[j]);
            }
        }

        function handleDragStart(e) {
            gameState.draggedPiece = e.target;
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            const dropZone = e.target;
            const piece = gameState.draggedPiece;
            
            if (!piece || !dropZone.classList.contains('puzzle-piece')) {
                return;
            }
            
            const pieceNumber = parseInt(piece.dataset.piece);
            const position = parseInt(dropZone.dataset.position);
            
            // Doƒüru pozisyon kontrol√º
            if (pieceNumber === position) {
                // Doƒüru yerle≈ütirme
                dropZone.style.backgroundImage = `url(${puzzleImage})`;
                dropZone.style.backgroundSize = '360px 360px';
                dropZone.style.backgroundPosition = getBackgroundPosition(pieceNumber);
                dropZone.style.backgroundRepeat = 'no-repeat';
                dropZone.classList.add('filled');
                
                piece.remove();
                gameState.correctPieces++;
                gameState.score += 100;
                
                // Confetti effect
                createConfetti(dropZone);
                
                updateScore();
                
                // Oyun tamamlandƒ± mƒ±?
                if (gameState.correctPieces === 9) {
                    setTimeout(gameCompleted, 500);
                }
            } else {
                // Yanlƒ±≈ü yerle≈ütirme
                gameState.score = Math.max(0, gameState.score - 10);
                updateScore();
                
                // Shake effect
                dropZone.style.animation = 'shake 0.5s ease';
                setTimeout(() => {
                    dropZone.style.animation = '';
                }, 500);
            }
        }

        function getBackgroundPosition(pieceNumber) {
            const row = Math.floor(pieceNumber / 3);
            const col = pieceNumber % 3;
            return `${-col * 120}px ${-row * 120}px`;
        }

        function createConfetti(element) {
            const rect = element.getBoundingClientRect();
            const emojis = ['üéâ', '‚ú®', 'üåü', 'üéä', 'üéà'];
            
            for (let i = 0; i < 5; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                confetti.style.left = rect.left + Math.random() * rect.width + 'px';
                confetti.style.top = rect.top + 'px';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }

        function updateTimer() {
            if (!gameState.startTime) return;
            
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateScore() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('correct').textContent = gameState.correctPieces;
        }

        function showHint() {
            const pieces = document.querySelectorAll('.puzzle-piece:not(.filled)');
            pieces.forEach(piece => {
                piece.style.backgroundColor = '#fffacd';
                piece.innerHTML = `<span style="color: #666; font-size: 2rem;">${piece.dataset.position}</span>`;
            });
            
            setTimeout(() => {
                pieces.forEach(piece => {
                    piece.style.backgroundColor = '';
                    piece.innerHTML = '';
                });
            }, 2000);
        }

        function gameCompleted() {
            clearInterval(gameState.timerInterval);
            
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Bonus for completing quickly
            if (elapsed < 60) gameState.score += 200;
            else if (elapsed < 120) gameState.score += 100;
            
            document.getElementById('finalTime').textContent = timeString;
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('successModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }

        function goBack() {
            window.location.href = '../oyunlar.html';
        }

        // Touch support for mobile
        let touchStartPos = { x: 0, y: 0 };

        function handleTouchStart(e) {
            const touch = e.touches[0];
            touchStartPos = { x: touch.clientX, y: touch.clientY };
            gameState.draggedPiece = e.target;
        }

        function handleTouchMove(e) {
            e.preventDefault();
        }

        function handleTouchEnd(e) {
            const touch = e.changedTouches[0];
            const element = document.elementFromPoint(touch.clientX, touch.clientY);
            
            if (element && element.classList.contains('puzzle-piece')) {
                handleDrop({ target: element, preventDefault: () => {} });
            }
        }

        // CSS shake animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);

        // Oyunu ba≈ülat
        window.addEventListener('load', initGame);
    </script>
</body>
</html>